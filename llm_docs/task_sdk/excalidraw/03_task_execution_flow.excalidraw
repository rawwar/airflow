{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "text",
      "id": "title",
      "x": 50,
      "y": 20,
      "width": 500,
      "height": 30,
      "fontSize": 24,
      "text": "Task Execution Flow: Complete Lifecycle",
      "strokeColor": "#1e1e1e"
    },
    {
      "type": "rectangle",
      "id": "phase1",
      "x": 100,
      "y": 80,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#4ecdc4",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase1_text",
      "x": 115,
      "y": 95,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "1. Supervisor Start\n\u2022 Authenticate with API\n\u2022 Get startup details\n\u2022 JWT token received",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase1",
      "lineHeight": 1.4
    },
    {
      "type": "arrow",
      "id": "arrow1",
      "x": 210,
      "y": 170,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase2",
      "x": 100,
      "y": 210,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#4ecdc4",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase2_text",
      "x": 115,
      "y": 225,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "2. Fork Process\n\u2022 Create socketpair\n\u2022 Fork task_runner.py\n\u2022 Send StartupDetails",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase2",
      "lineHeight": 1.4
    },
    {
      "type": "arrow",
      "id": "arrow2",
      "x": 210,
      "y": 300,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase3",
      "x": 100,
      "y": 340,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#95e1d3",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase3_text",
      "x": 115,
      "y": 355,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "3. Load DAG\n\u2022 Load DAG bundle\n\u2022 Parse DAG file\n\u2022 Find operator",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase3",
      "lineHeight": 1.4
    },
    {
      "type": "arrow",
      "id": "arrow3",
      "x": 210,
      "y": 430,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase4",
      "x": 100,
      "y": 470,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#95e1d3",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase4_text",
      "x": 115,
      "y": 485,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "4. Build Context\n\u2022 Create Context object\n\u2022 Lazy accessors\n\u2022 Template rendering",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase4",
      "lineHeight": 1.4
    },
    {
      "type": "arrow",
      "id": "arrow4",
      "x": 210,
      "y": 560,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase5",
      "x": 100,
      "y": 600,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#b2f2bb",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase5_text",
      "x": 115,
      "y": 615,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "5. Execute Task\n\u2022 operator.execute(ctx)\n\u2022 User code runs\n\u2022 Returns result",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase5",
      "lineHeight": 1.4
    },
    {
      "type": "rectangle",
      "id": "resources_box",
      "x": 380,
      "y": 340,
      "width": 260,
      "height": 350,
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeColor": "#f08c00",
      "backgroundColor": "#fff3bf",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "resources_title",
      "x": 390,
      "y": 350,
      "width": 200,
      "height": 25,
      "fontSize": 14,
      "text": "Resource Requests",
      "strokeColor": "#1e1e1e",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "resources_text",
      "x": 390,
      "y": 380,
      "width": 240,
      "height": 280,
      "fontSize": 12,
      "text": "During execution, task may\nrequest resources via socket:\n\n\u2022 XCom values\n  GetXCom \u2192 XComResult\n\n\u2022 Variables\n  GetVariable \u2192 VariableResult\n\n\u2022 Connections\n  GetConnection \u2192 ConnectionResult\n\n\u2022 Assets\n  GetAssetByName \u2192 AssetResult\n\n\u2022 DAG Run state\n  GetDagRunState \u2192 DagRunStateResult",
      "strokeColor": "#495057",
      "lineHeight": 1.5,
      "textAlign": "left"
    },
    {
      "type": "arrow",
      "id": "arrow5",
      "x": 210,
      "y": 690,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase6",
      "x": 100,
      "y": 730,
      "width": 220,
      "height": 90,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#4ecdc4",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase6_text",
      "x": 115,
      "y": 745,
      "width": 190,
      "height": 60,
      "fontSize": 13,
      "text": "6. Report State\n\u2022 Send SucceedTask\n\u2022 Supervisor updates API\n\u2022 PATCH /tasks/{id}/state",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase6",
      "lineHeight": 1.4
    },
    {
      "type": "arrow",
      "id": "arrow6",
      "x": 210,
      "y": 820,
      "width": 0,
      "height": 40,
      "strokeColor": "#333",
      "strokeWidth": 2,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ]
    },
    {
      "type": "rectangle",
      "id": "phase7",
      "x": 100,
      "y": 860,
      "width": 220,
      "height": 70,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#d3f9d8",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "phase7_text",
      "x": 115,
      "y": 880,
      "width": 190,
      "height": 30,
      "fontSize": 13,
      "text": "7. Complete\n\u2022 Both processes exit",
      "textAlign": "left",
      "verticalAlign": "middle",
      "containerId": "phase7",
      "lineHeight": 1.4
    },
    {
      "type": "line",
      "id": "socket_line",
      "x": 320,
      "y": 600,
      "width": 60,
      "height": 30,
      "strokeColor": "#f08c00",
      "strokeWidth": 2,
      "strokeStyle": "dashed",
      "points": [
        [
          0,
          0
        ],
        [
          60,
          30
        ]
      ]
    },
    {
      "type": "line",
      "id": "socket_line2",
      "x": 320,
      "y": 650,
      "width": 60,
      "height": 0,
      "strokeColor": "#f08c00",
      "strokeWidth": 2,
      "strokeStyle": "dashed",
      "points": [
        [
          0,
          0
        ],
        [
          60,
          0
        ]
      ]
    },
    {
      "type": "text",
      "id": "socket_label",
      "x": 325,
      "y": 620,
      "width": 50,
      "height": 15,
      "fontSize": 10,
      "text": "via socket",
      "strokeColor": "#f08c00"
    },
    {
      "type": "text",
      "id": "time1",
      "x": 340,
      "y": 105,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=0.2s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time2",
      "x": 340,
      "y": 235,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=0.3s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time3",
      "x": 340,
      "y": 365,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=0.6s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time4",
      "x": 340,
      "y": 495,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=0.7s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time5",
      "x": 340,
      "y": 625,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=10s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time6",
      "x": 340,
      "y": 755,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=10.2s",
      "strokeColor": "#868e96"
    },
    {
      "type": "text",
      "id": "time7",
      "x": 340,
      "y": 880,
      "width": 30,
      "height": 20,
      "fontSize": 11,
      "text": "t=10.3s",
      "strokeColor": "#868e96"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}