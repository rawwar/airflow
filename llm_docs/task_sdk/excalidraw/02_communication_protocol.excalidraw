{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "text",
      "id": "title",
      "x": 50,
      "y": 20,
      "width": 400,
      "height": 30,
      "fontSize": 24,
      "text": "Communication Protocol: msgpack Frames",
      "strokeColor": "#1e1e1e"
    },
    {
      "type": "rectangle",
      "id": "frame_box",
      "x": 100,
      "y": 80,
      "width": 400,
      "height": 200,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#e7f5ff",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "frame_title",
      "x": 110,
      "y": 90,
      "width": 200,
      "height": 25,
      "fontSize": 16,
      "text": "Message Frame Format",
      "strokeColor": "#1e1e1e",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "length_box",
      "x": 120,
      "y": 130,
      "width": 360,
      "height": 50,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "roundness": {
        "type": 2
      }
    },
    {
      "type": "text",
      "id": "length_text",
      "x": 140,
      "y": 145,
      "width": 320,
      "height": 20,
      "fontSize": 14,
      "text": "4 bytes: Length (big-endian uint32)",
      "strokeColor": "#1e1e1e",
      "textAlign": "left",
      "fontFamily": 3
    },
    {
      "type": "rectangle",
      "id": "payload_box",
      "x": 120,
      "y": 180,
      "width": 360,
      "height": 80,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "roundness": {
        "type": 2
      }
    },
    {
      "type": "text",
      "id": "payload_text",
      "x": 140,
      "y": 205,
      "width": 320,
      "height": 30,
      "fontSize": 14,
      "text": "N bytes: msgpack payload\n{\"type\": \"GetXCom\", ...}",
      "strokeColor": "#1e1e1e",
      "textAlign": "left",
      "fontFamily": 3,
      "lineHeight": 1.3
    },
    {
      "type": "rectangle",
      "id": "request_box",
      "x": 50,
      "y": 320,
      "width": 250,
      "height": 280,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#fff3bf",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "request_title",
      "x": 60,
      "y": 330,
      "width": 200,
      "height": 25,
      "fontSize": 16,
      "text": "Request Examples",
      "strokeColor": "#1e1e1e",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "request_list",
      "x": 60,
      "y": 360,
      "width": 230,
      "height": 220,
      "fontSize": 12,
      "text": "From Task Runner \u2192 Supervisor:\n\n\u2022 GetXCom\n\u2022 GetVariable\n\u2022 GetConnection\n\u2022 GetAssetByName\n\u2022 GetAssetByUri\n\u2022 GetDagRunState\n\u2022 GetTaskStates\n\u2022 SucceedTask\n\u2022 DeferTask\n\u2022 RetryTask\n\u2022 FailTask",
      "strokeColor": "#495057",
      "lineHeight": 1.5,
      "textAlign": "left"
    },
    {
      "type": "rectangle",
      "id": "response_box",
      "x": 350,
      "y": 320,
      "width": 250,
      "height": 280,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#333",
      "backgroundColor": "#d3f9d8",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "response_title",
      "x": 360,
      "y": 330,
      "width": 200,
      "height": 25,
      "fontSize": 16,
      "text": "Response Examples",
      "strokeColor": "#1e1e1e",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "response_list",
      "x": 360,
      "y": 360,
      "width": 230,
      "height": 220,
      "fontSize": 12,
      "text": "From Supervisor \u2192 Task Runner:\n\n\u2022 XComResult\n\u2022 VariableResult\n\u2022 ConnectionResult\n\u2022 AssetResult\n\u2022 DagRunStateResult\n\u2022 TaskStatesResult\n\u2022 StartupDetails\n\u2022 ErrorResponse\n\u2022 (empty acknowledgment)",
      "strokeColor": "#495057",
      "lineHeight": 1.5,
      "textAlign": "left"
    },
    {
      "type": "arrow",
      "id": "req_arrow",
      "x": 175,
      "y": 600,
      "width": 0,
      "height": 60,
      "strokeColor": "#f08c00",
      "strokeWidth": 3,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          60
        ]
      ],
      "endArrowhead": "arrow"
    },
    {
      "type": "text",
      "id": "req_label",
      "x": 90,
      "y": 620,
      "width": 80,
      "height": 20,
      "fontSize": 12,
      "text": "Request \u2192",
      "strokeColor": "#f08c00"
    },
    {
      "type": "arrow",
      "id": "res_arrow",
      "x": 425,
      "y": 660,
      "width": 0,
      "height": -60,
      "strokeColor": "#2f9e44",
      "strokeWidth": 3,
      "points": [
        [
          0,
          0
        ],
        [
          0,
          -60
        ]
      ],
      "endArrowhead": "arrow"
    },
    {
      "type": "text",
      "id": "res_label",
      "x": 440,
      "y": 620,
      "width": 90,
      "height": 20,
      "fontSize": 12,
      "text": "\u2190 Response",
      "strokeColor": "#2f9e44"
    },
    {
      "type": "rectangle",
      "id": "taskrunner_small",
      "x": 50,
      "y": 660,
      "width": 250,
      "height": 60,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#95e1d3",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "taskrunner_small_text",
      "x": 80,
      "y": 675,
      "width": 190,
      "height": 30,
      "fontSize": 14,
      "text": "Task Runner\n(User Code)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "taskrunner_small"
    },
    {
      "type": "rectangle",
      "id": "supervisor_small",
      "x": 350,
      "y": 660,
      "width": 250,
      "height": 60,
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeColor": "#1971c2",
      "backgroundColor": "#4ecdc4",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "supervisor_small_text",
      "x": 380,
      "y": 675,
      "width": 190,
      "height": 30,
      "fontSize": 14,
      "text": "Supervisor\n(Trusted)",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "supervisor_small"
    },
    {
      "type": "rectangle",
      "id": "example_box",
      "x": 50,
      "y": 760,
      "width": 550,
      "height": 180,
      "fillStyle": "solid",
      "strokeWidth": 1,
      "strokeColor": "#868e96",
      "backgroundColor": "#f8f9fa",
      "roundness": {
        "type": 3
      }
    },
    {
      "type": "text",
      "id": "example_title",
      "x": 60,
      "y": 770,
      "width": 150,
      "height": 25,
      "fontSize": 14,
      "text": "Example Message:",
      "strokeColor": "#1e1e1e",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "example_code",
      "x": 60,
      "y": 800,
      "width": 520,
      "height": 120,
      "fontSize": 11,
      "text": "# GetXCom Request\n{\n  \"type\": \"GetXCom\",\n  \"key\": \"return_value\",\n  \"task_id\": \"upstream_task\",\n  \"dag_id\": \"my_dag\",\n  \"run_id\": \"manual__2024-01-15T10:00:00+00:00\"\n}",
      "strokeColor": "#495057",
      "fontFamily": 3,
      "lineHeight": 1.4,
      "textAlign": "left"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}