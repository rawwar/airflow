{
    "name": "Apache Airflow - Github Codespaces",
    "image": "ghcr.io/astral-sh/uv:latest",
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "moby": false
        }
    },
    "postCreateCommand": "apt-get update && cd /workspaces/airflow && uv venv .venv -p 3.11 && source .venv/bin/activate && uv tool install prek && prek install -f && prek install -t pre-push && uv tool install -e ./dev/breeze && mkdir -p files/airflow-breeze-config && echo 'AIRFLOW__CORE__SIMPLE_AUTH_MANAGER_ALL_ADMINS=True' > files/airflow-breeze-config/environment_variables.env && echo 'AIRFLOW__API__EXPOSE_CONFIG=True' >> files/airflow-breeze-config/environment_variables.env",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-azuretools.vscode-docker"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "bash"
            }
        }
    },
    "workspaceFolder": "/workspaces/airflow",
    "forwardPorts": [8080],
    "mounts": [
        "source=${localWorkspaceFolder},target=/workspaces/airflow,type=bind,consistency=cached"
    ],
    "privileged": true
}
